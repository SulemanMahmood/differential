\begin{figure}
\centering
\begin{tabular}{c}
\begin{lstlisting}
unsigned max = ...;
int sum'(int arr[], unsigned len) {
  int result = 0;
  if (len > max)
    return -1;
  for (unsigned i = 0; i < len; i++)
    result += arr[i];
 return result;
}
\end{lstlisting}
\\ \hline
\begin{lstlisting}
unsigned max' = ...;
int sum(int arr[], unsigned len) {
  unsigned len' = len;
  int arr'[] = arr;
  int result = 0;
  int result' = 0;
  guard r' = (len' > max');
  if (r') return_value' = -1;
  if (r') r' = 0;
  {
    unsigned i = 0;
    unsigned i' = 0;
l:  guard g = (i < len);
l': guard g' = (i' < len');
    if (g) result += arr[i];
    if (r') if (g') result' += arr'[i'];
    if (g) i++;
    if (r') if (g') i'++;
    if (g) goto l;
    if (r') if (g') goto l';
  }
}
\end{lstlisting}
\end{tabular}
\caption{Patched $sum'$ and correlating $sum \bowtie sum'$}
\figlabel{LoopCorrelatingExample2}
\end{figure} 